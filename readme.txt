=== EWZ-Rating ===
Contributors: Josie Stauffer
Tags: upload, image, competition, spreadsheet, camera club, photography, judging
Requires at least: 3.5
Tested up to: 4.8
Stable tag: 1.0.11
License: GPLv2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html

Companion plugin to EntryWizard, for display and judging of the uploaded images.

== Description ==

This plugin requires that the EntryWizard plugin is installed.  It generates forms for displaying and judging images that were uploaded via EntryWizard ( either using its regular individual upload or using its batch entry upload facility added in version 1.2.21 ).

The data displayed in the forms, the judges and the selection of images may all be configured by the administrators.

Judges may sort the forms by most columns, including any scores they have entered.

Selected information about each image and/or maker may optionally be displayed in read-only fashion.

The judges must be logged-in users of the site who have been assigned a special role. Or, as a special case, image owners may see only their own images.


== Installation ==

* Either
    + Go to Plugins -> Install New and search for EWZ-Rating.  Click "Install Now".
  Or
    + Download and unzip the file into your plugins folder. 

* In the administration area, go to Plugins, look for "EWZ-Rating", and click "activate".  

* The "Rating Forms" and "Rating Schemes" links should appear on the administration sidebar in the EntryWizard menu.

= Usage =

* As with EntryWizard, most inputs in the administration area have popup help displays describing their use.

* A rating-scheme is quite similar to an EntryWizard layout -- it specifies the format of the form generated by the ewz_show_rating shortcode.

* Because it may use some of the layout fields for displaying read-only data, each rating-scheme applies to just one layout. Thus to create a rating-scheme you first have to select a layout.  

* A rating-form is analagous to an EntryWizard webform.  It specifies a form to be displayed by the ewz_show_rating shortcode.  For each form, you may specify which images are displayed, and which judges have access.

* Once the judging is complete, the administrators may download a spreadsheet containing the entered scores/comments in one of two possible forms - either one line per rating, or one line per image.

* If needed, further forms for tiebreaking, etc, may be generated that contain only specified images, and are visible only to specified judges.

* Quickstart for the impatient ( for further details, click on the information buttons ):

  1. Assign the "EntryWizard Judge" role to your judges ( it may be helpful to have a plugin installed that allows users to have multiple roles ).

  2. In the EntryWizard "Rating Schemes" page, select the layout you wish to use and click "Add a New Scheme".

  3. Give the scheme a name. Drag the fields you wish to display to the judges into the right-hand column. 

  4. Add any fields you wish the judges to fill out ( works like EntryWizard fields ).

  5. Set the image size, background color and text color, and save the scheme.

  6. In the EntryWizard "Rating Forms" page, select your scheme and click "Add a New Rating Form". 
     All webforms with your selected layout should display in the "Item Selection" list. 
     All your members with "EntryWizard Judge" role should display in the "Access Control" list.
 
  7. Fill out the name, identifier,  webform(s) and judges, open the rating form and save.

  8. Create a page containing the shortcode [ewz_show_rating identifier=".. your identifier here .."]. 
     Clicking on a thumbnail in the page should open a new window containing a larger version of the image. 
     Subsequent clicks on other thumbnails should cause the selected image to display in the same window.
     ( If you normally have new windows open in tabs, you may need to drag the tab out of the browser window ).

  9. Once the judging is over, download the results in a spreadsheet.

 10. If further information is required about specific images, or ties need to be broken, create a new page with 
     [ewz_show_rating ....] shortcodes tailored to your needs ( see the help item at the top of the Rating Forms page ).


== Changelog ==
= 1.0.11 =
* Remind judges if they dont save often enough ( trying to save too much at once can cause data loss )
* Fixed too many characters allowed in identifier input
= 1.0.10 =
* Fixed a typo in the documentation re a shortcode parameter name
= 1.0.9 =
* Fixed a bug that appeared when a custom display was used for a checkbox or radio layout field that was used in a rating restriction
= 1.0.8 =
* Fixed downloaded spreadsheet showing a row for every item in the webform, even if it did not match the item selection criteria
* Show the color-picker properly in a newly-created scheme
* "Read" view now shows "divided" fields to all judges
* New Help page showing all the help popup texts together
* Judges can delete a rating
* Admins can delete a rating if the associated setting is checked
* More checking of shortcode parameters for errors
* Warn on leaving a rating scheme admin page with unsaved changes
= 1.0.7 =
* Fixed a problem with the "User's own images only" option in rating forms under the "read" view.
= 1.0.6 =
* Fixed a bug in use of fixed fields in restrictions.
* Fixed validation so a value of "0" is allowed for required items. 
* Warn if a non-secondary field is appended to a secondary one.
* Show the save button, etc at the top of the rating scheme as well as at the bottom.
= 1.0.5 =
* Fixed a bug that sometimes caused issues when deleting restrictions
* Code cleanup. NOTE: this version requires at least version 1.2.22 of EntryWizard.
= 1.0.4 =
* Fixed an issue with sorting in the shortcode.
* Fixed a situation where some admin operations could remove the "Finished" status from a judge.
= 1.0.3 =
* Fixed a possible issue with some restriction checking
* Fixed a problem with background colours when there are multiple ewz-rating shortcodes in a page/post
* Added a facility for an admin to see the shortcode (almost) as a judge would see it, without having to log in as the judge.
* Added a choice to the scheme as to whether or not the "Using the Rating Form" button is displayed, and shortened the text of it for the "read" view
= 1.0.2 =
* Fixed a bug introduced in 1.0.1 that stopped the image from displaying on a read-only rating page 
= 1.0.1 =
* Added a facility to create a new scheme as a copy of an existing one.
* Added a facility to change some colours in the shortcode display. 
* Fixed a bug that stopped the Rating Shortcodes menu from displaying in a new post or page.
* Use of a color-selection popup instead of a drop-down list.
* Fixed a few other small bugs.
* A number of code changes to facilitate the generation of automated tests.  These changes should not have any visible effect.



== Upgrade Notice ==
= 1.0.11 =
* Reminder popup for judges to save, fix for incorrect length in identifier input.
= 1.0.10 =
* Fixed a typo in the documentation re a shortcode parameter name
= 1.0.9 =
* Fixed a bug that appeared when a custom display was used for a checkbox or radio layout field that was used in a rating restriction
= 1.0.8 =
* Help page, bugfixes. Judges can delete a rating. Setting to allow admins to delete individual ratings. 
= 1.0.7 =
* Fixed a problem with the "User's own images only" option in rating forms under the "read" view.
= 1.0.6 =
* Fixed a bug in use of fixed fields in restrictions, minor improvements.
= 1.0.5 =
* Fixed possible issue with deleting restrictions. NOTE: this version requires at least version 1.2.22 of EntryWizard.
= 1.0.4 =
* Fixed issues with sorting on the judge page, and with correctly reporting a judge's "Finished" status.
= 1.0.3 =
* Some minor bugfixes, new facility for an admin to see (almost) what a judge would see, without having to log in as the judge.
= 1.0.2 =
* Fixed a bug introduced in 1.0.1 that stopped the image from displaying on a read-only rating page 
= 1.0.1 =
* Two new functions: copy one Rating Scheme to another, and customize some of the colors on the front-end.

== Screenshots ==

1. The rating-scheme administration page

2. The rating-form  administration page

3. The output of the shortcode in a front-end page.

